{"version":3,"file":"day8.re_frame_10x.utils.localstorage.js","sources":["day8/re_frame_10x/utils/localstorage.cljs"],"mappings":";;;;;;AAOA,AAAKA,+CAAQ,KAAAC,qBAAuB,KAAAC;AAEpC,mDAAA,nDAAKwB;AAEL,gDAAA,hDAAOtB,wGAAUC;AAAjB,AAAA;AAEE,oDAAKqB,8FAAYrB;;AAEnB,AAAA;;;2CAAA,mDAAAC,9FAAME;AAAN,AAAA,IAAAD,WAAA,AAAA;AAAA,AAAA,QAAAA;KAAA;AAAA,OAAAC,uEAAA,CAAA,UAAA;;;KAAA;AAAA,OAAAA,uEAAA,CAAA,UAAA,MAAA,CAAA,UAAA;;;;AAAA,MAAA,KAAAC,MAAA,CAAA,8DAAA,AAAA;;;;;AAAA,AAAA,yEAAA,zEAAMD,oFAEFH;AAFJ,AAGG,kFAAA,3EAAC4B,uEAAI5B;;;AAHR,AAAA,yEAAA,zEAAMG,oFAIFH,IAAIsB;AACL,IAAMxB,QAAM,AAAMH,iDAAQ,AAACI,8CAASC,3GALvC;AAKG,AACE,GAAI,YAAYF;AACdwB;;AACA,OAACI,sDAAmB5B;;;;AAR3B,AAAA,mEAAA,nEAAMK;;AAAN,AAUA;;;4GAEGH,IAAIF,9DAFP,lDAAM0B;AAGJ,OAAM7B,iDAAQ,AAACI,8CAASC,KAAK,AAACuB,wGAAOzB,nNAHvC;;AAKA;;;6DAAA,7DAAM6B;AAGJ,IAAAtB,aAAA,AAAAC,cAAU,AAACa,YAAeC,3CAH5B;IAGEb,eAAA;IAAAC,eAAA;IAAAC,WAAA;;AAAA,AAAA,GAAA,AAAA,CAAAA,WAAAD;AAAA,QAAA,AAAAD,kDAAAE,tDAAQS;AAAR,AAAA,AACE,GAAM,AAACO,kCAAiBP,EAAEG;AAA1B,AACE,AAAS1B,oDAAQuB;;AADnB;;AADF;AAAA,eAAAb;eAAAE;eAAAC;eAAA,CAAAC,WAAA;;;;;;;AAAA,IAAAC,qBAAA,AAAAJ,cAAAD;AAAA,AAAA,GAAAK;AAAA,AAAA,IAAAL,iBAAAK;AAAA,AAAA,GAAA,AAAAC,6BAAAN;AAAA,IAAAO,kBAAA,AAAAC,sBAAAR;AAAA,AAAA,eAAA,AAAAS,qBAAAT;eAAAO;eAAA,AAAAG,gBAAAH;eAAA;;;;;;;AAAA,QAAA,AAAAI,gBAAAX,pBAAQa;AAAR,AAAA,AACE,GAAM,AAACO,kCAAiBP,EAAEG;AAA1B,AACE,AAAS1B,oDAAQuB;;AADnB;;AADF;AAAA,eAAA,AAAAD,eAAAZ;eAAA;eAAA;eAAA;;;;;;;;AAAA","names":["day8.re-frame-10x.utils.localstorage/storage","goog/storage.Storage","goog/storage.mechanism.HTML5LocalStorage","value","day8.re-frame-10x.utils.localstorage/safe-key","key","var_args","G__36947","day8.re-frame-10x.utils.localstorage/get","js/Error","seq__36957","cljs.core/seq","chunk__36958","count__36959","i__36960","temp__5457__auto__","cljs.core/chunked-seq?","c__4319__auto__","cljs.core/chunk-first","cljs.core/chunk-rest","cljs.core/count","cljs.core/first","cljs.core/next","k","js/Object.keys","js/localStorage","day8.re-frame-10x.utils.localstorage/safe-prefix","not-found","cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic","day8.re-frame-10x.utils.localstorage/save!","clojure.string/starts-with?","cljs.reader.read_string.cljs$core$IFn$_invoke$arity$1","day8.re-frame-10x.utils.localstorage/delete-all-keys!","day8.re_frame_10x.utils.localstorage.get.cljs$core$IFn$_invoke$arity$2"],"sourcesContent":["(ns day8.re-frame-10x.utils.localstorage\n  (:require [goog.storage.Storage]\n            [goog.storage.mechanism.HTML5LocalStorage]\n            [cljs.reader :as reader]\n            [clojure.string :as str])\n  (:refer-clojure :exclude [get]))\n\n(def storage (goog.storage.Storage. (goog.storage.mechanism.HTML5LocalStorage.)))\n\n(def safe-prefix \"day8.re-frame-10x.\")\n\n(defn- safe-key [key]\n  \"Adds a unique prefix to local storage keys to ensure they don't collide with the host application\"\n  (str safe-prefix key))\n\n(defn get\n  \"Gets a re-frame-10x value from local storage.\"\n  ([key]\n   (get key nil))\n  ([key not-found]\n   (let [value (.get storage (safe-key key))]\n     (if (undefined? value)\n       not-found\n       (reader/read-string value)))))\n\n(defn save!\n  \"Saves a re-frame-10x value to local storage.\"\n  [key value]\n  (.set storage (safe-key key) (pr-str value)))\n\n(defn delete-all-keys!\n  \"Deletes all re-frame-10x config keys\"\n  []\n  (doseq [k (js/Object.keys js/localStorage)]\n    (when (str/starts-with? k safe-prefix)\n      (.remove storage k))))\n"]}